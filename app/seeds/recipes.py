from app.models import db, Recipe, environment, SCHEMA
from sqlalchemy.sql import text


# Adds a demo user, you can add other users here if you want
def add_recipes():
  one = Recipe(
    owner_id=1,
    name="Spiced Squash and Phyllo Pie",
    ingredient_list="<ul><li>¼cup plus 3 tablespoons extra-virgin olive oil</li><li>¾cup whole, unsalted almonds</li><li>Salt and black pepper</li><li>1large onion, diced small (about 3 cups)</li><li>1½pounds butternut squash, cut in ½-inch chunks (about 4 cups)</li><li>½cup currants or golden raisins</li><li>½lemon, flesh and rind finely diced, or 1 small preserved lemon, seeded and finely chopped</li><li>1teaspoon ground cumin</li><li>1teaspoon ground turmeric</li><li>½teaspoon ras el hanout or garam masala</a></li><li>⅛teaspoon ground cayenne</li><li>¾cup unsalted butter, melted (1½ sticks), or a mixture of butter and olive oil</li><li>10sheets frozen phyllo dough, thawed</li><li>2large eggs</li><li>1½cups full-fat plain yogurt</li><li>4ounces crumbled feta</li><li>Confectioners’ sugar, for dusting</li><li>Ground cinnamon, for sprinkling</li></ul>",
    description="<p>This savory vegetable pie is modeled after the classic Moroccan b’stilla, usually made with squab, pigeon or chicken. It isn’t traditional, of course, but this vegetarian version is quite delicious, flaky, buttery and fragrant with spices. A diced preserved lemon adds perfume and sharpness, but you can also use a regular lemon. B’stilla normally has a layer of scrambled egg, but here, it’s replaced with a mixture of thick yogurt and feta. As with the original, everything is encased in golden, crisp buttered phyllo, sprinkled with confectioners’ sugar and cinnamon and served piping hot.</p>",
    cover_image="https://static01.nyt.com/images/2023/09/01/multimedia/AW-galbi-and-rice-cake-skewers-gtcz/AW-galbi-and-rice-cake-skewers-gtcz-master768.jpg?w=1280&q=75",
    instruction="<p><strong>Step 1</strong></p><p>Heat 3 tablespoons olive oil in a skillet over medium-high. Add almonds and fry gently for about 2 minutes, until fragrant and beginning to brown. Set aside to cool, then rough chop in a food processor (or hand chop) and season with salt. Set aside.</p><p><strong>Step 2</strong></p><p>In a Dutch oven or heavy skillet, warm remaining ¼ cup olive oil over medium-high heat. Add onion and cook, stirring, until lightly browned and softened, about 10 minutes.</p><p><strong>Step 3</strong></p><p>Add squash, season well with salt and pepper, and stir to coat. Add ½ cup water, cover pot and cook until squash is tender, about 10 minutes.</p><p><strong>Step 4</strong></p><p>Add currants, chopped lemon, cumin, turmeric, ras el hanout and cayenne, and mix gently to incorporate. Transfer mixture to a baking sheet and spread out to allow to cool to room temperature. Taste and adjust seasoning. It should be highly seasoned. (The filling can be made up to 2 days in advance, covered and refrigerated. Allow to come to room temperature before continuing.)</p><p><strong>Step 5</strong></p><p>Heat the oven to 375 degrees.</p><p><strong>Step 6</strong></p><p>Build the pie: Using a pastry brush, butter a 9-inch springform pan. Lay a sheet of phyllo across the pan and press down so it covers the bottom and the edges overhang. Paint or drizzle more butter over the sheet, including the overhang. Layer another sheet over, slightly rotated, and press down. Continue until you have a total of 6 sheets, rotating slightly and buttering each layer, leaving the edges overhanging.</p><p><strong>Step 7</strong></p><p>Spread bottom of pan with the reserved chopped almonds, then spoon in squash mixture and spread to an even thickness. Beat the eggs into the yogurt, then pour over squash mixture and top with feta.</p><p><strong>Step 8</strong></p><p>Cover with 4 more sheets of phyllo dough, buttering between layers. Gather overhanging sheets, a few layers at a time, folding them to the center and pressing down to smooth (it’s OK if the top sheets crack a little). Lightly butter the top. Pie may now be refrigerated for up to 2 days, or proceed with baking.</p><p><strong>Step 9</strong></p><p>Place the pan on a foil-lined baking sheet. Bake for 45 minutes to 1 hour, until crisp and golden. Let rest at least 15 minutes.</p><p><strong>Step 10</strong></p><p>To serve, unmold and dust top generously with confectioners’ sugar. Sprinkle with pinches of cinnamon.</p>"
  )
  two = Recipe(
    owner_id=2,
    name="Butternut Squash Pasta With Bacon and Parmesan",
    ingredient_list="<ul><li>2pounds butternut squash, peeled and cut into ¾-inch pieces (about 4 cups)</li><li>3tablespoons olive oil</li><li>Pinch of red-pepper flakes</li><li>Kosher salt and black pepper</li><li>1medium red onion, cut into 1-inch dice</li><li>5slices thick-cut bacon (about 5 ounces)</li><li>12ounces short, twisty pasta, like campanelle or cavatappi</li><li>¾cup finely grated Parmesan (about 1½ ounces)</li><li>2tablespoons chopped fresh chives</li><li>2tablespoons chopped fresh parsley</li></ul>",
    description="<p>In this cozy weeknight meal, roasted butternut squash and Parmesan are combined for a dish that’s flavorful but not too heavy. A bit of thick-cut bacon adds crunch and smokiness. If you don’t have thick-cut on hand, you can certainly use thin-cut, but keep an eye on it, as it will cook through faster. Be prepared to pluck it from the oven once crisp and allow the vegetables to finish cooking at their own pace. A handful of chopped fresh herbs added just before serving gives this comforting dish a bit of brightness.</p>",
    cover_image="https://static01.nyt.com/images/2023/09/28/multimedia/28tanisrex2-pie-wfjl/28tanisrex2-pie-wfjl-articleLarge.jpg?w=1280&q=75",
    instruction="<p><strong>Step 1</strong></p><p>Set a rack in the center of the oven and heat to 375 degrees.</p><p><strong>Step 2</strong></p><p>Add the butternut squash to a large baking sheet. Drizzle 2 tablespoons olive oil over the top and season with red-pepper flakes, salt and pepper. Toss to combine, then spread the squash into an even layer and bake for 15 minutes.</p><p><strong>Step 3</strong></p><p>While the butternut squash bakes, in a small bowl, toss the red onion with the remaining 1 tablespoon olive oil.</p><p><strong>Step 4</strong></p><p>After the squash has cooked for 15 minutes, give it a stir and push it to one side of the baking sheet to make room for the onion and bacon, trying to keep the squash in one layer. Add the red onion to the pan, then lay the strips of bacon in a single layer next to the onion.</p><p><strong>Step 5</strong></p><p>Return the baking sheet to the oven for another 30 minutes and cook, stirring the squash and onion after about 15 minute. The bacon should be crisp and the vegetables cooked through and beginning to caramelize at the edges. (They don’t have to be super golden brown, but a little color is nice.)</p><p><strong>Step 6</strong></p><p>Just before the vegetables and bacon are done, bring a large pot of salted water to a boil and cook the pasta until al dente according to package instructions. Reserve 1 cup pasta water, then drain the pasta and return it to the pot to keep warm if necessary.</p><p><strong>Step 7</strong></p><p>When the vegetables are tender and the bacon crispy, take the baking sheet out of the oven and carefully transfer the bacon to a cutting board. Coarsely chop the bacon.</p><p><strong>Step 8</strong></p><p>Add the butternut squash, onions and any bacon fat to the pot with the pasta. Add about ½ cup Parmesan and ½ cup pasta water to the pot and stir everything until well combined. You want the squash to break down a bit and coat the pasta; add more pasta water as necessary to coat the pasta with the squash and cheese.</p><p><strong>Step 9</strong></p><p>Stir in half the chopped bacon, then season with salt and pepper to taste. Divide the pasta among bowls or plates. Top with chives, parsley, black pepper and the remaining Parmesan and bacon. Serve immediately.</p>"
  )
  three = Recipe(
    owner_id=3,
    name="Easy Skillet Brownies",
    ingredient_list="<ul><li>¾cup/185 grams unsalted butter</li><li>6ounces bittersweet chocolate, coarsely chopped (about 1 cup)</li><li>½teaspoon fine sea or table salt</li><li>1½cups/300 grams granulated sugar</li><li>3large eggs</li><li>2teaspoons vanilla extract</li><li>¾cup/95 grams all-purpose flour</li><li>¾cup/110 grams walnut or pecan pieces (optional)</li><li>Flaky sea salt (optional)</li><li>Ice cream, for serving (optional)</li></ul>",
    description="<p>These simple brownies are mixed and baked in the same skillet. Chewy and fudgy, they’re everything you want in a brownie but faster and with less mess to clean up. If you don’t have an ovenproof nonstick skillet (preferably ceramic, or you could try this in a very well-seasoned cast-iron pan), pour the batter into a greased 9-inch square pan for baking. You can let the brownies cool and cut them into wedges or squares. Or, serve them warm from the oven and straight from the pan, preferably with a scoop of ice cream plopped on top.</p>",
    cover_image="https://static01.nyt.com/images/2022/01/28/multimedia/28apperex-1-9164/28apperex-1-9164-articleLarge.jpg?w=1280&q=75",
    instruction="<p><strong>Step 1</strong></p><p>Heat oven to 350 degrees. In an ovenproof 10- or 11-inch nonstick skillet (preferably ceramic nonstick) set over medium-low heat, combine the butter, chocolate and salt. Let butter and chocolate melt, stirring occasionally. Turn off the heat.</p><p><strong>Step 2</strong></p><p>Carefully whisk in sugar until smooth, then whisk in eggs and vanilla. Finally, whisk in flour until no streaks remain. Using a spatula, fold in the nuts, if using. Smooth top and sprinkle lightly with flaky sea salt if you like.</p><p><strong>Step 3</strong></p><p>Bake until the top is set, the center is soft and the edges are firm and start to pull away from the pan, 20 to 27 minutes. (A toothpick inserted into the center will come out gooey.) Transfer to a wire rack to cool. You can serve these still a little warm and straight from the pan, with ice cream on top if you like. Or, let cool completely before slicing into wedges or bars.</p>"
  )
  four = Recipe(
    owner_id=3,
    name="Hiroshima-Style Okonomiyaki",
    ingredient_list="<ul><li>¾cup dashi</a>, plus more if necessary</li><li>1teaspoon mirin</li><li>1pinch granulated sugar</li><li>1cup cake or all-purpose flour</li><li>6very thin slices pork belly (about 5 ounces), see Tips</li><li>Salt</li><li>3ounces green cabbage (from about ¼ small head)</li><li>3Japanese green onions or scallions</li><li>5tablespoons neutral oil</li><li>Tenkasu (tempura crisps), to taste (optional; see Tips)</li><li>Bean sprouts, to taste</li><li>2portions fresh yakisoba noodles (about 5½ ounces each)</li><li>2eggs</li><li>Okonomiyaki sauce and mayonnaise (preferably Kewpie brand), to taste (see Tips)</li><li>Bonito flakes and aonori powder (green seaweed powder), for serving (see Tips)</li></ul>",
    description="<p>Meals seldom get more soulful than okonomiyaki</a> — the Japanese cabbage pancake is soothing and filling, hearty with pork and savory with a topping of seaweed and bonito flakes. Its name stems from “okonomi,” which translates closely to “how you like,” and the recipe is an exercise in variation and flexibility. With a framework of shredded cabbage and its accompanying batter, any number of proteins, vegetables, cheeses and seasonings are fair game, yielding a meal that’s as personal as you’d like it to be. This iteration’s locality is commonly attributed to Hiroshima: the layered pancake’s noodles add texture while absorbing sauce and flavor from pork belly, a fried egg and whichever other toppings of yours are adorning the dish. If you’re cooking with a griddle, it’s possible to make multiple pancakes at once; but if you’re using a pan on your stovetop, it’s worth cooking them one at a time, then serving each immediately.&nbsp;</p>",
    cover_image="https://static01.nyt.com/images/2023/10/10/multimedia/08EATrex-Okonomiyaki-wjth/08EATrex-Okonomiyaki-wjth-articleLarge.jpg?w=1280&q=75",
    instruction="<p><strong>Step 1</strong></p><p>In a medium bowl, combine the dashi, mirin and sugar until the sugar has dissolved. Add the flour and mix until smooth. Refrigerate the batter for at least 30 minutes and up to an hour.</p><p><strong>Step 2</strong></p><p>While the batter is chilling, lightly salt the pork belly strips and set aside. Very thinly slice the cabbage (you’ll need about 1 cup). Mince 1 green onion, then thinly slice the others and set aside.</p><p><strong>Step 3</strong></p><p>Remove the chilled batter from the fridge. (The batter should be slightly thinner than pancake batter. If it seems too thick, stir in another teaspoon dashi.) Heat a large griddle or medium skillet over medium-high. Once hot (a drop of water should sizzle and skitter across the top), add 1 tablespoon oil, then add about ¼ cup of batter, spreading with the back of the ladle or measuring cup to about 6 inches in diameter.</p><p><strong>Step 4</strong></p><p>Once the pancake’s edges begin to sizzle, about 2 minutes, top the pancake with half of the cabbage and minced green onion, then tenkasu and bean sprouts to taste.</p><p><strong>Step 5</strong></p><p>Set 3 slices pork belly atop the pancake, without covering one another. Then pour a small amount of batter (1 to 2 tablespoons) over the top of the pork belly and, using a wide spatula, quickly flip the pancake over, pork side down. Tuck any stray pieces of vegetables underneath and shift the pancake to one side of the griddle. Allow the meat to cook through, adjusting the heat to avoid burning the pancake, 1 to 4 minutes, depending on the thickness of the pork.</p><p><strong>Step 6</strong></p><p>On the other side of the griddle, or in a second skillet heated over medium-high, add 1 tablespoon oil. Untangle 1 portion of Yakisoba noodles, and stir fry until coated with oil, about 1 minute. Season noodles with okonomiyaki sauce to taste (or about 2 tablespoons), stirring and tossing to coat.</p><p><strong>Step 7</strong></p><p>Form the noodles into a circular shape roughly the size of your pancake. Then flip the okonomiyaki on top of the yakisoba, setting the pancake side (not the pork belly side) onto the noodles. Reform the okonomiyaki into a clean circle.</p><p><strong>Step 8</strong></p><p>In the now freed griddle or pan space, add ½ tablespoon cooking oil, then add one egg, using a spatula to break the yolk and spread the egg into a circular shape roughly the size of your pancake. Slide the okonomiyaki atop the egg. Flip the okonomiyaki over so that the egg side is up, and remove from heat.</p><p><strong>Step 9</strong></p><p>Transfer to a plate and cover with okonomiyaki sauce, mayonnaise, a pinch of bonito flakes, a pinch of aonori powder and sliced green onion. Serve okonomiyaki immediately upon completion. To make the second okonomiyaki, wipe out the griddle or pans and repeat with remaining ingredients.</p>"
  )
  five = Recipe(
    owner_id=3,
    name="Saffron-Ginger Pears",
    ingredient_list="<ul><li>6small Bartlett, D’Anjou or Comice pears, slightly underripe</li><li>2cups dry white wine</li><li>1cup granulated sugar</li><li>¼teaspoon crumbled saffron</li><li>2thick slices of fresh ginger</li><li>Crème fraîche or vanilla ice cream, for serving</li></ul>",
    description="<p>For a stellar dessert, poach pears and let them steep in a bright yellow saffron-ginger syrup. With saffron, a little goes a long way: A quarter teaspoon will not break the bank. Prepare these days ahead of serving and store them in their syrup; they’ll only improve in flavor. Served chilled with a dab of crème fraîche or a scoop of vanilla ice cream, this dessert is sheer luxury.</p>",
    cover_image="https://static01.nyt.com/images/2023/09/28/multimedia/28tanisrex3-pears-vhjg/28tanisrex3-pears-vhjg-articleLarge.jpg?w=1280&q=75",
    instruction="<p><strong>Step 1</strong></p><p>Peel the pears, leaving stems intact.</p><p><strong>Step 2</strong></p><p>Put wine, sugar, saffron and ginger in a stainless-steel saucepan or skillet just large enough to hold the pears in a single layer over high heat. Stir and bring to a boil.</p><p><strong>Step 3</strong></p><p>Add pears and reduce to a simmer. Cover and cook gently for about 20 minutes (turning occasionally if the pears aren’t fully submerged), until pears are just tender when poked with a skewer or a small, sharp knife. If time permits, allow pears to cool in their syrup in the refrigerator, preferably overnight or for up to several days.</p><p><strong>Step 4</strong></p><p>Remove pears from syrup. Simmer syrup down to a thick glaze over brisk heat, about 15 minutes. Let cool slightly (about 10 minutes) and pour over pears to serve. Pair with crème fraîche or vanilla ice cream.</p>"
  )
  six = Recipe(
    owner_id=3,
    name="Roasted Chickpeas and Peppers With Goat Cheese",
    ingredient_list="<ul><li>1(15½-ounce) can chickpeas, drained and patted dry</li><li>3medium sweet bell peppers, stemmed, seeded and thinly sliced lengthwise (about 4 cups)</li><li>1large medium-spicy pepper, such as banana, Cubanelle, Hungarian wax, Jimmy Nardello or poblano, stemmed, seeded and thinly sliced (about 1 cup)</li><li>¼cup extra-virgin olive oil, more for serving</li><li>2 to 6sprigs fresh thyme, oregano or rosemary</li><li>2garlic cloves, finely grated or minced</li><li>1tablespoon red wine vinegar, more to taste</li><li>1teaspoon fine sea salt, more as needed</li><li>4ounces crumbled fresh goat cheese (½ cup; optional)</li><li>3tablespoons chopped fresh basil or mint</li><li>Crusty bread, for serving (optional)</li></ul>",
    description="<p>In this quick, colorful sheet-pan dinner, sweet bell peppers and spicy chiles caramelize as they roast, becoming even more intense under the oven’s high heat. Crunchy chickpeas and soft bits of goat cheese add flavor, texture and protein, rounding out the dish. Most of the work here takes place in the oven, leaving you free to make a salad if you want a cool and crisp accompaniment. Note that this recipe serves two or three; if you want to double it, be sure to use two sheet pans and add a few minutes to the cooking time so everything has a chance to turn golden brown.</p>",
    cover_image="https://static01.nyt.com/images/2023/09/20/multimedia/20appetite-peppers-01-mbvl/20appetite-peppers-01-mbvl-articleLarge.jpg?w=1280&q=75",
    instruction="<p><strong>Step 1</strong></p><p>Heat oven to 425 degrees. In a large bowl, combine chickpeas, sweet peppers and spicy pepper. Add olive oil, herbs, garlic, red wine vinegar and salt, tossing well. Evenly spread the mixture on a large baking sheet.</p><p><strong>Step 2</strong></p><p>Roast for 28 to 35 minutes, stirring once or twice until the peppers are well browned and starting to crisp. Crumble goat cheese on top, if you like, and drizzle with more olive oil, salt, and vinegar if you like. Serve with bread, if using.</p>"
  )
  seven = Recipe(
    owner_id=1,
    name="Roasted Vegetables With Creamy Coconut Dressing",
    ingredient_list="<ul><li>1½ pounds carrots, trimmed, scrubbed and cut into 3-inch pieces, halved lengthwise if thick</li><li>1pound yellow beets, trimmed, scrubbed and quartered or cut into eighths if large</li><li>1pound fennel bulbs, tops and fronds trimmed and fronds saved, bulbs cut into eighths</li><li>¼cup neutral oil, such as grapeseed</li><li>Salt and pepper</li><li>⅓cup unsweetened coconut cream</li><li>One 1-inch piece ginger, scrubbed and finely grated</li><li>1tablespoon honey</li><li>2teaspoons rice vinegar</li><li>2teaspoons fish sauce or soy sauce</li><li>1teaspoon Dijon mustard</li><li>1lime</li></ul>",
    description="A creamy, tangy dressing enlivens a warm vegetable salad of roast carrots, beets and fennel. Coconut cream adds a lovely richness to the vinaigrette while ginger brings a bite and the acidity of rice vinegar and limes deliver a slight pucker. To achieve a nice golden brown caramelization while roasting your vegetables, make sure the cut pieces are dry and spread evenly on the sheet pan. And those fennel fronds — save them! They add a nice licorice flavor to tingle your palate ever so slightly once chopped and tossed over the finished dish.",
    cover_image="https://static01.nyt.com/images/2023/10/06/multimedia/YK-roasted-vegetable-salad-with-creamy-coconut-dressing-qgtz/YK-roasted-vegetable-salad-with-creamy-coconut-dressing-qgtz-articleLarge.jpg?w=1280&q=75",
    instruction="<p><strong>Step 1</strong></p><p>Heat oven to 400 degrees.</p><p><strong>Step 2</strong></p><p>On a half-sheet pan, drizzle vegetables with oil and toss to evenly coat. Season lightly with salt and pepper. Roast until vegetables are tender and golden brown, about 40 minutes.</p><p><strong>Step 3</strong></p><p>Meanwhile, in a small bowl, whisk together coconut cream, ginger, honey, vinegar, fish sauce and mustard. Zest the lime right into the bowl. Squeeze in a tablespoon of lime juice and season lightly with salt and pepper. Taste the sauce and add lime juice or salt and pepper if necessary.</p><p><strong>Step 4</strong></p><p>Drizzle the dressing over the roasted vegetables while they’re still hot and toss to evenly coat. Top with fennel fronds and serve warm or at room temperature.</p>"
  )
  eight = Recipe(
    owner_id=1,
    name="Cantonese-Style Steamed Fish",
    ingredient_list="<ul><li>1small bunch cilantro, leaves and tender stems separated from larger stems</li><li>1(1½-inch) knob fresh young ginger (about 1 ounce; see Tip), scrubbed</li><li>6whole scallions, ends trimmed</li><li>2tablespoons Chinese light soy sauce</li><li>1tablespoon Shaoxing wine or dry sherry</li><li>1tablespoon granulated sugar</li><li>1whole white-fleshed fish, cleaned and gutted, about 1½ to 2½ pounds (or 1 to 1½ pounds lean white fish fillets, see Tip)</li><li>Salt</li><li>1small hot, fresh red pepper, such as Fresno or Thai bird’s-eye, thinly sliced (optional)</li><li>3tablespoons neutral oil, such as vegetable or canola</li></ul>",
    description="<p>This classic Cantonese dish is one of the simplest ways I know to prepare whole fish or fillets. Simply steamed lean white fish is seasoned with the umami richness of soy sauce and wine, then finished with a (careful) tableside drizzle of hot oil that sizzles and sputters, bringing out the bouquet of fresh ginger, scallions and cilantro piled on top of the fish. You’ll need a lidded pan wide enough to fit the plate you are steaming your fish on, and deep enough to cover the fish, the plate, and a steaming rack underneath. But you’ll end up with fish that is light and silky in texture and aroma, but deep in flavor.</p>",
    cover_image="https://static01.nyt.com/images/2023/09/22/multimedia/22kenjirex-fish-pbkj/22kenjirex-fish-pbkj-articleLarge.jpg?w=1280&q=75",
    instruction="<p><strong>Step 1</strong></p><p>Fill a salad spinner with very cold water, and add cilantro leaves and tender stems. Rinse larger cilantro stems and scatter in a plate large enough to fit your fish.</p><p><strong>Step 2</strong></p><p>Trim the skin and small knobs off the ginger, and scatter trimmings over the plated cilantro stems. Cut the peeled ginger lengthwise into the thinnest planks you can, then cut those planks into slivers — the thinner, the better – and transfer to the salad spinner.</p><p><strong>Step 3</strong></p><p>Roughly split scallions where the light green parts transition to dark green. Add dark green ends to the plate.</p><p><strong>Step 4</strong></p><p>Cut scallion whites and light green parts crosswise into rough 2-inch segments, then split each in half lengthwise. Laying each half segment cut side down on the cutting board, slice it lengthwise into the thinnest slivers you can and add to the salad spinner.</p><p><strong>Step 5</strong></p><p>In a small bowl, stir together the soy sauce, sherry, sugar and 1 tablespoon water until the sugar is mostly dissolved. Set aside.</p><p><strong>Step 6</strong></p><p>Place a steaming rack or a few clean, empty tuna cans with tops and bottoms removed in a wide, deep, lidded pan or wok, add enough water to reach just below the top of the rack, then bring the water to a boil over high heat.</p><p><strong>Step 7</strong></p><p>Meanwhile, if using whole fish, rinse it under cold running water and pat dry with paper towels. If fish is 2 pounds or larger, slash deeply through its flesh perpendicular to its spine a couple of times for more even cooking. (No need to rinse or slash fillets.) Lightly salt the fish, stuffing a few aromatics from the plate into the whole fish’s cavity, if necessary. Place fish on aromatics, shingling fillets, if necessary, to fit.</p><p><strong>Step 8</strong></p><p>Transfer plate to the steamer, cover, and steam until the meat near the thickest part of the fleshy neck of the fish (or the thickest part of a fillet) shows little resistance or flakes when poked, about 7 to 10 minutes for flat fish and thin fillets, and 9 to 12 minutes for round fish.</p><p><strong>Step 9</strong></p><p>With a thin metal spatula (or two), carefully transfer fish to a serving platter. Alternatively, if you don’t mind guests picking out the ginger skin and cilantro stems, serve the fish on the steaming plate. Just drain the liquid by holding the fish down gently with a spatula as you tilt the plate over the sink. Pour the sauce mixture over the hot fish.</p><p><strong>Step 10</strong></p><p>Drain and spin aromatics in the salad spinner and toss them into a tangled bird’s nest. Spread half of the aromatics over the fish. Sprinkle with chile, if using. Heat the oil in a small skillet until shimmering and just barely starting to smoke. Carefully spoon or pour the hot oil over the aromatics. They should sputter and sizzle significantly (see Tip). Top with remaining fresh aromatics and serve immediately.</p>"
  )
  nine = Recipe(
    owner_id=1,
    name="Spicy Tomato Pasta With Arugula",
    ingredient_list="<ul><li>Salt</li><li>¾pound long, thin pasta, such as vermicelli or capellini</li><li>2tablespoons olive oil, plus more as needed</li><li>1(4½-ounce) tube tomato paste, preferably double-concentrated</li><li>1 to 2teaspoons Calabrian chile paste (or chile-garlic paste or sliced hot pickled chiles), plus more for garnish</li><li>4packed cups baby arugula</li><li>Grated Parmesan, for serving</li></ul>",
    description="<p>A back-pocket recipe for tired weeknights when you don’t want to cut an onion or mince garlic, this one-pot pasta</a> is coated in a flavorful sauce thanks to a simple base of olive oil, tomato paste, fiery Calabrian chile paste and pasta water. Crushed Calabrian chiles blended with oil, salt and sometimes vinegar comprise this Italian chile paste that offers both heat and flavor, though a chile-garlic paste or hot pickled chiles can be used if you have trouble finding it. (Err on the side of caution with the chile, as you can always top your bowl with more.) Serve the arugula two ways: Add a tangle of it to the bottom of each serving bowl and toss it with the hot pasta to soften and cut the rawness, or pile it on top, drizzle with your nice olive oil and some grated cheese for a salad and pasta combination.</p>",
    cover_image="https://static01.nyt.com/images/2023/09/27/multimedia/yf-spicy-tomato-pasta-with-arugula-lhmp/yf-spicy-tomato-pasta-with-arugula-lhmp-articleLarge.jpg?w=1280&q=75",
    instruction="<p><strong>Step 1</strong></p><p>Bring a large pot of well-salted water to a boil over high heat. Add the pasta, then adjust the heat to maintain a gentle boil and cook until the pasta is just al dente, about 1 minute less than the package instructions. Reserve 1 cup of pasta cooking water; drain the pasta in a colander.</p><p><strong>Step 2</strong></p><p>Wipe out the same pot and return to medium heat. Add the olive oil and tomato paste, stirring until combined and slightly darker in color, about 2 minutes. Season lightly with salt and add the chile paste, stirring to combine, 15 to 30 seconds.</p><p><strong>Step 3</strong></p><p>Reduce the heat to low. Add the pasta and ½ cup of the pasta water to the pot; use tongs to stir and coat the noodles. Drizzle with oil as needed to prevent the noodles from sticking and allow the sauce to adhere, tossing until the noodles are all a fiery orange color. Add a splash more pasta water if it looks dry. Season with salt as needed.</p><p><strong>Step 4</strong></p><p>Divide the pasta among individual bowls, then set the arugula on one side. Finish with some grated cheese, more chile and a final drizzle of oil, if desired. Toss to integrate and soften the arugula, if desired.</p>"
  )
  ten = Recipe(
    owner_id=2,
    name="Yakgwa (Honey Cookies)",
    ingredient_list="<ul><li>2cups/260 grams all-purpose flour</li><li>2tablespoons granulated sugar</li><li>½teaspoon ground ginger</li><li>½teaspoon ground cinnamon</li><li>Coarse kosher salt and freshly ground black pepper</li><li>4teaspoons toasted sesame oil</li><li>¼cup honey or maple syrup</li><li>5tablespoons soju (see Tip), plus more if needed</li><li>About 1 quart canola or vegetable oil, for frying</li><li>Crystallized ginger, sesame seeds or pine nuts, for garnish (optional)</li><li>½cup jocheong (Korean brown rice syrup; see Tip)</li><li>2tablespoons honey or maple syrup</li><li>1(2-inch) piece fresh (unpeeled) ginger, sliced</li></ul>",
    description="<p>These not-too-sweet Korean honey cookies, fried and then soaked in gingery syrup, are uniquely soft and chewy on the outside and flaky on the inside. Called yakgwa (yak meaning “medicine” and gwa meaning “confection”), these treats originally from the Goryeo dynasty (918-1392) are seeing a resurgence in popularity from Seoul to the world, thanks to social media. Traditionally served on Korean festival days like Chuseok and Seollal, birthdays and ancestral rites like jesa, the anniversary of a loved one’s passing, yakgwa are also an encapsulation of Korea’s dessert history. At a time when sugar was not a main sweetener, sweetness was achieved with ingredients like rice syrup and honey, paired with ginger and cinnamon. Enjoy these on their own with a cup of tea or try them with a scoop of vanilla ice cream or whipped cream, which lends balance to the sticky sweetness. For a vegan option, the honey can be swapped with maple syrup for incredible results.</p>",
    cover_image="https://static01.nyt.com/images/2023/09/18/multimedia/18YAKGWArex-fbpc/18YAKGWArex-fbpc-articleLarge.jpg?w=1280&q=75",
    instruction="<p><strong>Step 1</strong></p><p>Make the cookie dough: In a large bowl, whisk together the flour, sugar, ground ginger, cinnamon, 1 teaspoon salt and 3 grinds pepper. Add the sesame oil and whisk to distribute. Switching to a spoon, stir in the honey and soju until there’s no more loose flour and the mixture starts to form a craggy dough. If needed, you can add more soju, 1 teaspoon at a time, until the dough is hydrated. Press the dough together with your hands, cover the bowl and place it in the refrigerator to rest for at least 1 hour and up to 2, during which it will continue to hydrate and cohere even more.</p><p><strong>Step 2</strong></p><p>Meanwhile, make the syrup: In a small saucepan over medium heat, bring the brown rice syrup, honey, ginger and 2 tablespoons water to a boil, stirring occasionally. Remove from the heat and set aside, covered, to infuse and cool slightly.</p><p><strong>Step 3</strong></p><p>Roll out the cookies: Using a rolling pin or empty wine bottle, roll the dough into a rectangle that is roughly ¼-inch-thick, then fold it in half, pressing the sides to create even edges and roll it out again. Fold and roll the dough out like this 4 more times.</p><p><strong>Step 4</strong></p><p>Use a round, 2-inch cookie cutter (or the lip of a champagne flute) to cut out rounds. You will need to roll out the scraps a few more times to use up all of the dough, resulting in about 20 cookies. Using a fork, dock the top of each cookie twice, piercing all the way through.</p><p><strong>Step 5</strong></p><p>Fry the cookies: Set a wire rack on a sheet pan. In a wide pot, heat about 1 inch of oil to 225 degrees over medium, then reduce the heat to low. Working in batches, add the cookies in a single layer and fry until deeply golden brown and slightly puffed, 25 to 30 minutes per batch. (Flip cookies occasionally for even browning and adjust the heat as needed so the oil bubbles gently and stays 225 degrees.) Transfer the cookies to the rack and cool fully, at least 30 minutes.</p><p><strong>Step 6</strong></p><p>Soak the cookies: Remove the ginger from the syrup. Transfer the cookies to a wide resealable container, drizzle evenly with the syrup and toss to coat. Cover tightly and soak at room temperature overnight (or up to 24 hours), flipping occasionally to evenly soak.</p><p><strong>Step 7</strong></p><p>Before serving, remove the cookies from the syrup, then garnish with crystallized ginger, sesame seeds or pine nuts, if desired. In a tightly sealed container, fresh yakgwa keep for up to 3 days at room temperature.</p>"
  )


  db.session.add(one)
  db.session.add(two)
  db.session.add(three)
  db.session.add(four)
  db.session.add(five)
  db.session.add(six)
  db.session.add(seven)
  db.session.add(eight)
  db.session.add(nine)
  db.session.add(ten)


# Uses a raw SQL query to TRUNCATE or DELETE the users table. SQLAlchemy doesn't
# have a built in function to do this. With postgres in production TRUNCATE
# removes all the data from the table, and RESET IDENTITY resets the auto
# incrementing primary key, CASCADE deletes any dependent entities.  With
# sqlite3 in development you need to instead use DELETE to remove all data and
# it will reset the primary keys for you as well.
def undo_recipes():
    if environment == "production":
        db.session.execute(f"TRUNCATE table {SCHEMA}.recipes RESTART IDENTITY CASCADE;")
    else:
        db.session.execute(text("DELETE FROM recipes"))

    db.session.commit()
